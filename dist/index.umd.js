!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).xLaunch={})}(this,(function(t){"use strict";function e(t,e){return Object.prototype.toString.call(t).substr(8,e.length).toLowerCase()===e}function n(t){return e(t,"undefined")}var i=/\{(\w+)\}/g;function o(t,o,r){return void 0===r&&(r=!1),t.replace(i,(function(t,i){var s=e(o,"object")?o[i]:o;return n(s)&&r?t:s}))}var r=Object.freeze(['<style>\n:host {\n    margin: 0;\n    padding: 0;\n    position: relative;\n    display:inline-block;\n}\n.X-launch-slot {\n    z-index:0;\n    position:relative;\n}\n.X-launch-btn {\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 3;\n    position: absolute;\n}\n</style>\n<div class="X-launch">\n    <div class="X-launch-btn">\n        <',' id="X_LAUNCH_COM_{id}" style="width:100%;height:100%;display:block;" ','>\n        <template>\n            <div style="{style}"></div>\n        </template>\n        </','>\n    </div>\n    <div class="X-launch-slot">\n        <slot></slot>\n    </div>\n</div>']),s="x-launch",a={wechat:"wx-open-launch-weapp",wechatapp:"wx-open-launch-app"},c={};function u(t){if(void 0===t&&(t="wechat"),c[t])return c[t];var e=t+"-props";return c[t]=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return t.reduce((function(t,n,i){switch(t+=n,e[i]){case"wechat":t+=a.wechat;break;case"wechat-app":t+=a.wechatapp;break;case"wechat-props":t+='username="{username}" path="{path}"';break;case"wechat-app-props":t+='appid="{appid}" extinfo="{extinfo}"'}return t}),"")}(r,t,e,t),c[t]}var h=0,p=function(t){function e(){var e=this;t.call(this),this.xid=++h,this.isDebug=!1,this.name="x-launch",this.status=!1,this.onLaunch=function(t){e.bubbling("launch",t.detail)},this.onError=function(t){e.bubbling("error",t)},this.onReady=function(){e.bubbling("ready",!0)},this.init()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){this.status||(this.root=this.attachShadow({mode:"open"}),this.status=!0)},e.prototype.bubbling=function(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:e}))},e.prototype.connectedCallback=function(){var t=this.getAttribute("type"),e=this.getAttribute("path")||"",i=this.getAttribute("username")||"",r=this.getAttribute("appid")||"",s=this.getAttribute("extinfo")||"";this.isDebug=this.hasAttribute("debug");var c,h=this.getBoundingClientRect(),p="width:"+h.width+"px;height:"+h.height+"px;display:block;"+(this.isDebug?"background:#e92a2a54;":"");this.root.innerHTML=o(u(t),{username:i,path:e,style:p,appid:r,extinfo:s,id:this.xid}),this.openNode=this.root.querySelector("#X_LAUNCH_COM_"+this.xid),this.openNode&&(this.openNode.addEventListener("launch",this.onLaunch),this.openNode.addEventListener("error",this.onError),this.openNode.addEventListener("ready",this.onReady)),this.isDebug&&!function(t){switch(!0){case/^wechat/.test(t):return!n(window.wx)}}(t)&&(c="当前环境中不存在与 ["+a[t]+"] 匹配的关键对象，请确认前置条件已准备妥当",console.log("%c[XLaunch] %c"+c,"color: cyan;","color: yellow;"))},e.prototype.disconnectedCallback=function(){this.openNode&&(this.openNode.removeEventListener("launch",this.onLaunch),this.openNode.removeEventListener("error",this.onError),this.openNode.removeEventListener("ready",this.onReady),this.openNode=null)},e}(HTMLElement);customElements.define(s,p),t.XLaunch=p,t.default=function(t){n(t)||e(t.name,"string")&&"vue"===t.name.toLowerCase()&&function(t){return e(t,"function")}(t.component)&&t.component(s)},t.getOpenTagName=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map((function(t){return a[t]||null})).filter((function(t){return Boolean(t)}))},Object.defineProperty(t,"__esModule",{value:!0})}));
