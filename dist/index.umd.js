!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).xLaunch={})}(this,(function(t){"use strict";function e(t,e){return Object.prototype.toString.call(t).substr(8,e.length).toLowerCase()===e}function n(t){return e(t,"undefined")}var o=/\{(\w+)\}/g;function i(t,i,r){return void 0===r&&(r=!1),t.replace(o,(function(t,o){var a=e(i,"object")?i[o]:i;return n(a)&&r?t:a}))}var r=Object.freeze(['<style>\n:host {\n    margin: 0;\n    padding: 0;\n    position: relative;\n    display:inline-block;\n}\n.X-launch-slot {\n    z-index:0;\n    position:relative;\n}\n.X-launch-btn {\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 3;\n    position: absolute;\n}\n</style>\n<div class="X-launch">\n    <div class="X-launch-btn">\n        <',' id="X_LAUNCH_COM_{id}" style="width:100%;height:100%;display:block;" ','>\n        <template>\n            <div style="{style}"></div>\n        </template>\n        </','>\n    </div>\n    <div class="X-launch-slot">\n        <slot></slot>\n    </div>\n</div>']),a="x-launch",s={wechat:"wx-open-launch-weapp",wechatapp:"wx-open-launch-app"},c={};function u(t){if(void 0===t&&(t="wechat"),c[t])return c[t];var e=t+"-props";return c[t]=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return t.reduce((function(t,n,o){switch(t+=n,e[o]){case"wechat":t+=s.wechat;break;case"wechat-app":t+=s.wechatapp;break;case"wechat-props":t+='username="{username}" path="{path}"';break;case"wechat-app-props":t+='appid="{appid}" extinfo="{extinfo}"'}return t}),"")}(r,t,e,t),c[t]}var h=0,p=function(t){function e(){var e=this;t.call(this),this.xid=++h,this.isDebug=!1,this.name="x-launch",this.onLaunch=function(t){e.bubbling("launch",t.detail)},this.onError=function(t){e.bubbling("error",t)},this.onReady=function(){e.bubbling("ready",!0)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bubbling=function(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:!1,composed:!1,detail:e}))},e.prototype.connectedCallback=function(){this.root=this.attachShadow({mode:"open"});var t=this.getAttribute("type"),e=this.getAttribute("path")||"",o=this.getAttribute("username")||"",r=this.getAttribute("appid")||"",a=this.getAttribute("extinfo")||"";this.isDebug=this.hasAttribute("debug");var c,h=this.getBoundingClientRect(),p="width:"+h.width+"px;height:"+h.height+"px;display:block;"+(this.isDebug?"background:#e92a2a54;":"");this.root.innerHTML=i(u(t),{username:o,path:e,style:p,appid:r,extinfo:a,id:this.xid}),this.openNode=this.root.querySelector("#X_LAUNCH_COM_"+this.xid),this.openNode&&(this.openNode.addEventListener("launch",this.onLaunch),this.openNode.addEventListener("error",this.onError),this.openNode.addEventListener("ready",this.onReady)),this.isDebug&&!function(t){switch(!0){case/^wechat/.test(t):return!n(window.wx)}}(t)&&(c="当前环境中不存在与 ["+s[t]+"] 匹配的关键对象，请确认前置条件已准备妥当",console.log("%c[XLaunch] %c"+c,"color: cyan;","color: yellow;"))},e.prototype.disconnectedCallback=function(){this.openNode&&(this.openNode.removeEventListener("launch",this.onLaunch),this.openNode.removeEventListener("error",this.onError),this.openNode.removeEventListener("ready",this.onReady),this.openNode=null,this.root=null)},e}(HTMLElement);customElements.define(a,p),t.XLaunch=p,t.default=function(t){n(t)||e(t.name,"string")&&"vue"===t.name.toLowerCase()&&function(t){return e(t,"function")}(t.component)&&t.component(a)},t.getOpenTagName=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map((function(t){return s[t]||null})).filter((function(t){return Boolean(t)}))},Object.defineProperty(t,"__esModule",{value:!0})}));
